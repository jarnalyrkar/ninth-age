function p(t){t.querySelector(".tabs-cards__nav-list").addEventListener("click",n=>{if(n.target.classList.contains("tabs-cards__nav-button")&&!n.target.classList.contains("tabs-cards__nav-button--active")){const a=t.querySelector(".tabs-cards__card--active"),r=t.querySelector(".tabs-cards__nav-button--active");a.classList.remove("tabs-cards__card--active"),r.classList.remove("tabs-cards__nav-button--active");const o=n.target.value,c=t.querySelector(`.tabs-cards__card[data-tab="${o}"]`);n.target.classList.add("tabs-cards__nav-button--active"),c.classList.add("tabs-cards__card--active")}})}const f=document.querySelector(".language-selector__dropdown-container"),S=document.querySelector(".language-selector__button");function h(){addEventListener("click",t=>{t.target.classList.contains("language-selector__link")||(t.target===S?f.classList.toggle("language-selector__dropdown-container--open"):L())})}function L(){f.classList.remove("language-selector__dropdown-container--open")}const d=document.querySelector(".site-navigation");function v(){d.classList.remove("site-navigation--open")}function b(){d.classList.contains("site-navigation--open")?d.classList.remove("site-navigation--open"):d.classList.add("site-navigation--open")}function q(t){const e=t.querySelector(".armies-list__armies");t.querySelector(".armies-list__buttons").addEventListener("click",a=>{if(!a.target.classList.contains("army-button--active")&&a.target.classList.contains("army-button")){const r=document.querySelector(".army-button--active");r&&(r.classList.remove("army-button--active"),e.querySelector(".army-featured--show").classList.remove("army-featured--show")),a.target.classList.add("army-button--active");const o=a.target.getAttribute("data-target");e.querySelector(`[id="${o}"]`).classList.add("army-featured--show")}})}const m="https://www.9thbuilder.com";let y="";function w(){document.querySelector("#version-select").addEventListener("change",async e=>{try{let n=await $(e.target.value);n=I(n),j(n),x(n),await M(),T()}catch(n){console.error("Error fetching armies:",n)}})}function E(){document.querySelectorAll('#army-list .unit-card [type="file"]').forEach(e=>{e.addEventListener("change",n=>{const a=n.target.files[0];if(a){new Image;const r=new FileReader;r.onload=o=>{n.target.closest(".unit-card").querySelector(".unit-card__inner").style.backgroundImage=`url(${o.target.result})`,e.parentElement.querySelector(".bg-pos-tools").classList.remove("hidden")},r.readAsDataURL(a),e.nextElementSibling.classList.remove("hidden")}})})}function T(){const t=document.querySelector('input[type="color"]'),e=document.documentElement;t.addEventListener("change",()=>{e.style.setProperty("--army-color",t.value)})}async function M(){const t=document.querySelector("#army-sub-version-select");t.addEventListener("change",async()=>{const e=t.value;await k(e);let n=await C(e);A(n),E(),H()})}function H(){const t=document.querySelector("#army-list");t.addEventListener("click",e=>{e.target.classList.contains("remove-image-button")&&(e.target.closest(".unit-card").querySelector(".unit-card__inner").removeAttribute("style"),e.target.previousElementSibling.value=null,e.target.classList.add("hidden"),e.target.nextElementSibling.classList.add("hidden"))}),t.addEventListener("change",e=>{e.target.classList.contains("bg-pos-x")&&(e.target.closest(".unit-card__options").previousElementSibling.style.backgroundPositionX=e.target.value+"%"),e.target.classList.contains("bg-pos-y")&&(e.target.closest(".unit-card__options").previousElementSibling.style.backgroundPositionY=e.target.value+"%")})}async function k(t){const e=await fetch(`${m}/en/api/v1/ninth_age/armies/${t}.json`);if(!e.ok)throw new Error("Failed to fetch army data");const n=await e.json();return y=n.medium_logo,n}function A(t){const e=document.querySelector("#army-list");e.innerHTML="";const n=document.querySelector("#unit-card");t.forEach(a=>{let r=n.content.cloneNode(!0);r.querySelector(".unit-card__name").innerHTML=a.name,r.querySelector(".unit-card__size").innerHTML=a.carac.height.name,r.querySelector(".unit-card__type").innerHTML="Unit - ",r.querySelector(".unit-card__base").innerHTML=a.carac.base.name+"mm",r.querySelector(".unit-card__charge").innerHTML=a.carac.mar??"/",r.querySelector(".unit-card__advance").innerHTML=a.carac.adv??"/",r.querySelector(".unit-card__courage").innerHTML=a.carac.dis??"/",r.querySelector(".unit-card__health-points").innerHTML=a.carac.hp??"/",r.querySelector(".unit-card__defense").innerHTML=a.carac.def??"/",r.querySelector(".unit-card__resiliance").innerHTML=a.carac.res??"/",r.querySelector(".unit-card__armour").innerHTML=a.carac.arm??"/",r.querySelector(".unit-card__attacks").innerHTML=a.troops[0].carac.att??"/",r.querySelector(".unit-card__offensive-skill").innerHTML=a.troops[0].carac.of??"/",r.querySelector(".unit-card__strength").innerHTML=a.troops[0].carac.str??"/",r.querySelector(".unit-card__armour-piercing").innerHTML=a.troops[0].carac.ap??"/",r.querySelector(".unit-card__agility").innerHTML=a.troops[0].carac.agi??"/",y&&(r.querySelector(".unit-card__icon img").src=m+y);const o=r.querySelector(".unit-card__special-rules"),c=[],s=[];a.model_rule_unit_troops.forEach(l=>{const u=document.createElement("li");u.innerHTML=l.name,l.name.length>16?(u.classList.add("long"),c.push(u)):s.push(u)}),c.forEach(l=>o.appendChild(l)),s.forEach(l=>o.appendChild(l)),e.appendChild(r)})}async function C(t){const e=await fetch(`${m}/en/api/v1/ninth_age/army-${t}/units/full`);if(!e.ok)throw new Error("Failed to fetch army data");const n=await e.json();return console.log(n),n}async function $(t){const e=`/en/api/v1/ninth_age/version-${t}/armies/full.json`,n=await fetch(m+e);if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);return n.json()}function I(t){const e={Official:0,Supplement:1,FanMade:2};return t.sort((n,a)=>(e[n.source]??99)-(e[a.source]??99))}function j(t){const e=document.querySelector("#army-select"),n=e.querySelector("option[disabled][selected]");e.innerHTML="",n&&e.appendChild(n);const a=new Map;t.forEach(r=>{a.has(r.name)||a.set(r.name,r.id)}),a.forEach((r,o)=>{const c=document.createElement("option");c.value=o,c.textContent=o,e.appendChild(c)})}function x(t){const e=document.querySelector("#army-select"),n=document.querySelector("#army-sub-version-select");e.addEventListener("change",()=>{const a=e.value;let r=t.filter(c=>c.name===a);r.sort((c,s)=>s.id>c.id);const o=n.querySelector("option[disabled][selected]");n.innerHTML="",o&&n.appendChild(o),r.forEach(c=>{const s=document.createElement("option");s.value=c.id,s.textContent=c.name_with_sub_version,n.appendChild(s)})})}const g=document.querySelectorAll(".tabs-cards");g&&g.forEach(t=>{p(t)});h();addEventListener("click",t=>{t.target.classList.contains("burger")&&b()});addEventListener("keydown",t=>{t.key==="Escape"&&(L(),v())});const i=document.querySelector("#news-scroll-button");if(i){const t=i.closest(".forum-news").querySelector(".forum-news__list");i.addEventListener("click",()=>{t.scrollLeft<window.innerWidth/2?t.scroll({left:window.innerWidth,behavior:"smooth"}):t.scroll({left:0,behavior:"smooth"})}),t.addEventListener("scroll",()=>{t.scrollLeft<window.innerWidth/2?i.innerHTML!=">"&&(i.innerHTML=">"):i.innerHTML!="<"&&(i.innerHTML="<")})}const _=document.querySelector(".armies-list");_&&q(_);w();
//# sourceMappingURL=site-DrBYu_m_.js.map
